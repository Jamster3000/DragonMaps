<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "nqsq1gjza7");
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Create and share epic D&D battlemaps with DragonMaps. Design your maps with our easy-to-use online tool.">
  <title>DragonMaps - D&D Battlemap Creator</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Roboto:wght@400;700&display=swap">
  <script src="components/components.js"></script>
</head>
<body>
  <div id="header-placeholder"></div>
  <main>
      <section id="hero">
          <h1>Create Epic D&D Battlemaps</h1>
          <p>Design, share, and bring your adventures to life!</p>
          <button href="pages/designer">Start Creating</button>
      </section>

      <div id="popup" class="popup">
          <span class="close-btn" onclick="closePopup()">&times;</span>
          <div class="popup-content">
              <h2>We Value Your Feedback!</h2>
              <p>Help us improve your experience. Would you mind taking a quick survey about our website?</p>
              <a href="pages/opinion-form" class="cta-button" onclick="closePopup()">Take Survey</a>
          </div>
      </div>
  </main>
  <div id="footer-placeholder"></div>
</body>
</html>
<script>
    function setCookie(name, value, days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function showPopup() {
        const popup = document.getElementById('popup');
        popup.style.display = 'block';
        setTimeout(() => {
            popup.style.opacity = '1';
        }, 10);
    }

    function closePopup() {
        const popup = document.getElementById('popup');
        popup.style.opacity = '0';
        setTimeout(() => {
            popup.style.display = 'none';
        }, 300);
        setCookie('feedback_popup_shown', 'true', 30); // Set cookie for 30 days
    }

    // Check if the popup has been shown in the last 30 days
    if (!getCookie('feedback_popup_shown')) {
        // Show popup after 15 seconds if it hasn't been shown recently
        setTimeout(showPopup, 15000);
    }
</script>
